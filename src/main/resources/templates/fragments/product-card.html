<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<!-- null 체크 추가 -->
<div th:if="${product != null}" th:fragment="productCard(product)">
    <a th:href="@{'/products/' + ${product.id}}" class="item-link">
        <div class="item">

            <!-- 이미지: 비었거나 null이면 기본 이미지 -->
            <img th:if="${#lists.isEmpty(product.images) or product.images[0]?.image == null}"
                 src="/images/mascot.png"
                 alt="기본 이미지"/>

            <!-- 이미지: 첫 이미지가 있을 때만 -->
            <img th:if="${!#lists.isEmpty(product.images) and product.images[0]?.image != null}"
                 th:src="@{${product.images[0].image}}"
                 alt="상품 이미지"/>

            <div class="item-info">
                <p class="title" th:text="${product.title}">제목</p>
                <p class="price"
                   th:text="${#numbers.formatInteger(product.price, 3, 'COMMA') + '원'}">가격</p>
                <p class="location" th:text="${product.location}">위치</p>
                <p class="meta">
                    조회 <span th:text="${product.viewCount}">0</span>
                    · 채팅 <span th:text="${product.chatCount}">0</span>
                </p>
            </div>
        </div>
    </a>
</div>
</body>
</html>
